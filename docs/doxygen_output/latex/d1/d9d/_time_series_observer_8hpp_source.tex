\hypertarget{_time_series_observer_8hpp_source}{}\doxysection{Time\+Series\+Observer.\+hpp}
\label{_time_series_observer_8hpp_source}\index{CompactStar/Physics/Evolution/Observers/TimeSeriesObserver.hpp@{CompactStar/Physics/Evolution/Observers/TimeSeriesObserver.hpp}}
\mbox{\hyperlink{_time_series_observer_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{2 \textcolor{comment}{// -\/*-\/ lsst-\/c++ -\/*-\/}}
\DoxyCodeLine{3 \textcolor{comment}{/*}}
\DoxyCodeLine{4 \textcolor{comment}{ * CompactStar}}
\DoxyCodeLine{5 \textcolor{comment}{ * See License file at the top of the source tree.}}
\DoxyCodeLine{6 \textcolor{comment}{ *}}
\DoxyCodeLine{7 \textcolor{comment}{ * Copyright (c) 2025}}
\DoxyCodeLine{8 \textcolor{comment}{ * Mohammadreza Zakeri}}
\DoxyCodeLine{9 \textcolor{comment}{ *}}
\DoxyCodeLine{10 \textcolor{comment}{ * MIT License â€” see LICENSE at repo root.}}
\DoxyCodeLine{11 \textcolor{comment}{ */}}
\DoxyCodeLine{12 }
\DoxyCodeLine{54 \textcolor{preprocessor}{\#include <cstddef>}}
\DoxyCodeLine{55 \textcolor{preprocessor}{\#include <cstdint>}}
\DoxyCodeLine{56 \textcolor{preprocessor}{\#include <fstream>}}
\DoxyCodeLine{57 \textcolor{preprocessor}{\#include <memory>}}
\DoxyCodeLine{58 \textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{59 \textcolor{preprocessor}{\#include <unordered\_map>}}
\DoxyCodeLine{60 \textcolor{preprocessor}{\#include <utility>}}
\DoxyCodeLine{61 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{62 }
\DoxyCodeLine{63 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_i_observer_8hpp}{CompactStar/Physics/Evolution/Observers/IObserver.hpp}}"{}}}
\DoxyCodeLine{64 }
\DoxyCodeLine{65 \textcolor{comment}{// Optional: allow pulling from driver diagnostics providers (same concept as DiagnosticsObserver).}}
\DoxyCodeLine{66 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_driver_diagnostics_8hpp}{CompactStar/Physics/Driver/Diagnostics/DriverDiagnostics.hpp}}"{}}}
\DoxyCodeLine{67 \textcolor{preprocessor}{\#include "{}CompactStar/Physics/Evolution/Diagnostics/DiagnosticCatalog.hpp"{}}}
\DoxyCodeLine{68 }
\DoxyCodeLine{69 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_directory_8hpp}{Zaki/String/Directory.hpp}}"{}}}
\DoxyCodeLine{70 }
\DoxyCodeLine{71 \textcolor{keyword}{namespace }CompactStar::Physics::Evolution}
\DoxyCodeLine{72 \{}
\DoxyCodeLine{73 \textcolor{keyword}{class }StateVector;}
\DoxyCodeLine{74 \textcolor{keyword}{class }DriverContext;}
\DoxyCodeLine{75 \} \textcolor{comment}{// namespace CompactStar::Physics::Evolution}}
\DoxyCodeLine{76 }
\DoxyCodeLine{77 \textcolor{keyword}{namespace }CompactStar::Physics::Evolution::Observers}
\DoxyCodeLine{78 \{}
\DoxyCodeLine{79 }
\DoxyCodeLine{94 \textcolor{keyword}{class }\mbox{\hyperlink{class_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer}{TimeSeriesObserver}} final : \textcolor{keyword}{public} \mbox{\hyperlink{class_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_i_observer}{IObserver}}}
\DoxyCodeLine{95 \{}
\DoxyCodeLine{96   \textcolor{keyword}{public}:}
\DoxyCodeLine{106     \textcolor{keyword}{enum class} \mbox{\hyperlink{class_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_af22274949fdb7545a83fe6f520e1c3f4}{OutputFormat}}}
\DoxyCodeLine{107     \{}
\DoxyCodeLine{108         \mbox{\hyperlink{class_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_af22274949fdb7545a83fe6f520e1c3f4acc8d68c551c4a9a6d5313e07de4deafd}{CSV}}, }
\DoxyCodeLine{109         \mbox{\hyperlink{class_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_af22274949fdb7545a83fe6f520e1c3f4a1b05e94fb4b6889494e33649cc26f8c1}{TSV}}   }
\DoxyCodeLine{110     \};}
\DoxyCodeLine{111 }
\DoxyCodeLine{119     \textcolor{keyword}{struct }\mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_catalog_scalar_ref}{CatalogScalarRef}}}
\DoxyCodeLine{120     \{}
\DoxyCodeLine{121         std::string producer;}
\DoxyCodeLine{122         std::string key;}
\DoxyCodeLine{123     \};}
\DoxyCodeLine{124 }
\DoxyCodeLine{140     \textcolor{keyword}{enum class} \mbox{\hyperlink{class_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_a1bea35e165e0780dbb8b83b42183e255}{ColumnSource}}}
\DoxyCodeLine{141     \{}
\DoxyCodeLine{142         BuiltinState,}
\DoxyCodeLine{143         DriverScalar}
\DoxyCodeLine{144     \};}
\DoxyCodeLine{145 }
\DoxyCodeLine{160     \textcolor{keyword}{struct }\mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_column}{Column}}}
\DoxyCodeLine{161     \{}
\DoxyCodeLine{163         std::string \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_column_aa1e3ff621d7b6cf6c7b78675b7606e6d}{key}};}
\DoxyCodeLine{164 }
\DoxyCodeLine{166         \mbox{\hyperlink{class_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_a1bea35e165e0780dbb8b83b42183e255}{ColumnSource}} \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_column_a841485e4d794e649acfc6f0dc9e81e1e}{source}} = ColumnSource::BuiltinState;}
\DoxyCodeLine{167 }
\DoxyCodeLine{169         std::string \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_column_a4bd5274ab7f2beb68cc71cbcfe65c797}{unit}};}
\DoxyCodeLine{170 }
\DoxyCodeLine{172         std::string \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_column_af97c707545250d1eacb3d2d6bfb1ef3f}{description}};}
\DoxyCodeLine{173 }
\DoxyCodeLine{175 }
\DoxyCodeLine{176         \textcolor{comment}{// /**}}
\DoxyCodeLine{177         \textcolor{comment}{//  * @brief Driver diagnostics producer name to query (matches DiagnosticsName()).}}
\DoxyCodeLine{178         \textcolor{comment}{//  *}}
\DoxyCodeLine{179         \textcolor{comment}{//  * Only used when source == ColumnSource::DriverScalar.}}
\DoxyCodeLine{180         \textcolor{comment}{//  */}}
\DoxyCodeLine{181         \textcolor{comment}{// std::string driver\_name;}}
\DoxyCodeLine{182 }
\DoxyCodeLine{183         \textcolor{comment}{// /**}}
\DoxyCodeLine{184         \textcolor{comment}{//  * @brief Scalar key inside the driver's DiagnosticPacket to extract.}}
\DoxyCodeLine{185         \textcolor{comment}{//  *}}
\DoxyCodeLine{186         \textcolor{comment}{//  * Only used when source == ColumnSource::DriverScalar.}}
\DoxyCodeLine{187         \textcolor{comment}{//  */}}
\DoxyCodeLine{188         \textcolor{comment}{// std::string driver\_key;}}
\DoxyCodeLine{189 }
\DoxyCodeLine{194         \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_catalog_scalar_ref}{CatalogScalarRef}} \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_column_adbf635269125ccc8c1551a3cda0445db}{catalog\_ref}};}
\DoxyCodeLine{195 }
\DoxyCodeLine{197 }
\DoxyCodeLine{208         \textcolor{keyword}{enum class} \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_column_adc11decc3a7a3674da6ee1075866237b}{Builtin}}}
\DoxyCodeLine{209         \{}
\DoxyCodeLine{210             \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_column_adc11decc3a7a3674da6ee1075866237baa76d4ef5f3f6a672bbfab2865563e530}{Time}},        }
\DoxyCodeLine{211             \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_column_adc11decc3a7a3674da6ee1075866237bac9b8452efea49351675891e4a2b7592a}{SampleIndex}}, }
\DoxyCodeLine{212             \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_column_adc11decc3a7a3674da6ee1075866237baeb01cfc6b78c0dcc6139bfae3b565855}{StepIndex}},  }
\DoxyCodeLine{213             \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_column_adc11decc3a7a3674da6ee1075866237ba33eb6b49ff1618f87fc94d945017e893}{Tinf\_K}},        }
\DoxyCodeLine{214             \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_column_adc11decc3a7a3674da6ee1075866237ba9a0e2080fb67a9ee6caf3260abdaab89}{Omega\_rad\_s}}, }
\DoxyCodeLine{215                          \textcolor{comment}{// Future common fields (optional):}}
\DoxyCodeLine{216                          \textcolor{comment}{// dLnTinf\_dt\_1\_s,}}
\DoxyCodeLine{217                          \textcolor{comment}{// dOmega\_dt\_rad\_s2,}}
\DoxyCodeLine{218         \};}
\DoxyCodeLine{219 }
\DoxyCodeLine{221         \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_column_adc11decc3a7a3674da6ee1075866237b}{Builtin}} \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_column_ae1aa4038d3e4f99c873cb0b272c273d3}{builtin}} = \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_column_adc11decc3a7a3674da6ee1075866237ba33eb6b49ff1618f87fc94d945017e893}{Builtin::Tinf\_K}};}
\DoxyCodeLine{222     \};}
\DoxyCodeLine{223 }
\DoxyCodeLine{227     \textcolor{keyword}{struct }\mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_options}{Options}}}
\DoxyCodeLine{228     \{}
\DoxyCodeLine{230         \mbox{\hyperlink{class_zaki_1_1_string_1_1_directory}{Zaki::String::Directory}} \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_options_ad60b2e6703778934516c8c95907f6102}{output\_path}} = \textcolor{stringliteral}{"{}timeseries.csv"{}};}
\DoxyCodeLine{231 }
\DoxyCodeLine{233         \mbox{\hyperlink{class_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_af22274949fdb7545a83fe6f520e1c3f4}{OutputFormat}} \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_options_a4c331408a171623d5bcb827abe7015c7}{format}} = \mbox{\hyperlink{class_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_af22274949fdb7545a83fe6f520e1c3f4acc8d68c551c4a9a6d5313e07de4deafd}{OutputFormat::CSV}};}
\DoxyCodeLine{234 }
\DoxyCodeLine{236         \textcolor{keywordtype}{bool} \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_options_ac3aaf7844057e444a61a43e203485ab3}{append}} = \textcolor{keyword}{false};}
\DoxyCodeLine{237 }
\DoxyCodeLine{239         \textcolor{keywordtype}{bool} \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_options_aa1552752b60a7788d7d83efde73f8492}{record\_at\_start}} = \textcolor{keyword}{true};}
\DoxyCodeLine{240 }
\DoxyCodeLine{247         std::size\_t \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_options_acd793235cedabd33df1e4be92e069c53}{record\_every\_n\_samples}} = 1;}
\DoxyCodeLine{248 }
\DoxyCodeLine{255         \textcolor{keywordtype}{double} \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_options_a74aa057d034d15f6ea1b2b963aa31717}{record\_every\_dt}} = 0.0;}
\DoxyCodeLine{256 }
\DoxyCodeLine{262         \textcolor{keywordtype}{bool} \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_options_a6bf29e4db4a89c20df6d81af743e6bbf}{write\_header}} = \textcolor{keyword}{true};}
\DoxyCodeLine{263 }
\DoxyCodeLine{274         \textcolor{keywordtype}{bool} \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_options_aaff53c10fffc24e4ed14abf3944e7b0b}{write\_sidecar\_metadata}} = \textcolor{keyword}{true};}
\DoxyCodeLine{275 }
\DoxyCodeLine{282         \textcolor{keywordtype}{int} \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_options_a18c85a60253edef3329dd579a75ea90f}{float\_precision}} = 17;}
\DoxyCodeLine{283 }
\DoxyCodeLine{289         std::vector<Column> \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_options_a986c08a0d8e9d7871de09a898ff3bc50}{columns}};}
\DoxyCodeLine{290 }
\DoxyCodeLine{298         \textcolor{keywordtype}{bool} \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_options_a5e770028e164a52415c646c96e4e94dc}{use\_catalog}} = \textcolor{keyword}{false};}
\DoxyCodeLine{299 }
\DoxyCodeLine{305         \mbox{\hyperlink{class_zaki_1_1_string_1_1_directory}{Zaki::String::Directory}} \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_options_a2a1bc681329f36eebef7f8cc4b25748e}{catalog\_path}} = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{306 }
\DoxyCodeLine{317         std::vector<std::string> \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_options_ac17631af81952d8eac03e279f217d784}{catalog\_profiles}};}
\DoxyCodeLine{318 }
\DoxyCodeLine{324         \textcolor{keywordtype}{bool} \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_options_a7072842e254002333afd761ad00baeff}{include\_builtin\_time}} = \textcolor{keyword}{true};}
\DoxyCodeLine{325         \textcolor{keywordtype}{bool} include\_builtin\_sample\_index = \textcolor{keyword}{true};}
\DoxyCodeLine{326     \};}
\DoxyCodeLine{327 }
\DoxyCodeLine{333     \textcolor{keyword}{explicit} \mbox{\hyperlink{class_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer}{TimeSeriesObserver}}(\textcolor{keyword}{const} \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_options}{Options}} \&opts);}
\DoxyCodeLine{334 }
\DoxyCodeLine{338     \textcolor{keyword}{explicit} \mbox{\hyperlink{class_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer}{TimeSeriesObserver}}(\mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_options}{Options}} \&\&opts);}
\DoxyCodeLine{339 }
\DoxyCodeLine{352     \mbox{\hyperlink{class_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer}{TimeSeriesObserver}}(\mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_options}{Options}} opts,}
\DoxyCodeLine{353                        std::vector<const Driver::Diagnostics::IDriverDiagnostics *> drivers);}
\DoxyCodeLine{354 }
\DoxyCodeLine{366     \mbox{\hyperlink{class_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer}{TimeSeriesObserver}}(\mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_1_1_options}{Options}} opts,}
\DoxyCodeLine{367                        std::vector<const Driver::Diagnostics::IDriverDiagnostics *> drivers,}
\DoxyCodeLine{368                        std::shared\_ptr<const Diagnostics::DiagnosticCatalog> catalog);}
\DoxyCodeLine{369 }
\DoxyCodeLine{370     \mbox{\hyperlink{class_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer}{\string~TimeSeriesObserver}}() \textcolor{keyword}{override};}
\DoxyCodeLine{371 }
\DoxyCodeLine{377     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_a4b11195e540dce6671de183647d338db}{OnStart}}(\textcolor{keyword}{const} \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_run_info}{RunInfo}} \&run,}
\DoxyCodeLine{378                  \textcolor{keyword}{const} \mbox{\hyperlink{class_compact_star_1_1_physics_1_1_evolution_1_1_state_vector}{Evolution::StateVector}} \&Y0,}
\DoxyCodeLine{379                  \textcolor{keyword}{const} \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_driver_context}{Evolution::DriverContext}} \&ctx) \textcolor{keyword}{override};}
\DoxyCodeLine{380 }
\DoxyCodeLine{386     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_aa6656929b81b4797703199f69f09a963}{OnSample}}(\textcolor{keyword}{const} \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_sample_info}{SampleInfo}} \&s,}
\DoxyCodeLine{387                   \textcolor{keyword}{const} \mbox{\hyperlink{class_compact_star_1_1_physics_1_1_evolution_1_1_state_vector}{Evolution::StateVector}} \&Y,}
\DoxyCodeLine{388                   \textcolor{keyword}{const} \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_driver_context}{Evolution::DriverContext}} \&ctx) \textcolor{keyword}{override};}
\DoxyCodeLine{389 }
\DoxyCodeLine{395     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_aba66e59e3948534e3090fcdfec12211d}{OnFinish}}(\textcolor{keyword}{const} \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_finish_info}{FinishInfo}} \&fin,}
\DoxyCodeLine{396                   \textcolor{keyword}{const} \mbox{\hyperlink{class_compact_star_1_1_physics_1_1_evolution_1_1_state_vector}{Evolution::StateVector}} \&Yf,}
\DoxyCodeLine{397                   \textcolor{keyword}{const} \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_driver_context}{Evolution::DriverContext}} \&ctx) \textcolor{keyword}{override};}
\DoxyCodeLine{398 }
\DoxyCodeLine{402     [[nodiscard]] std::string \mbox{\hyperlink{class_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_time_series_observer_ad09fe15d806b74be9ccdf045aa684b0a}{Name}}()\textcolor{keyword}{ const override }\{ \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}TimeSeriesObserver"{}}; \}}
\DoxyCodeLine{403 }
\DoxyCodeLine{404   \textcolor{keyword}{private}:}
\DoxyCodeLine{405     \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{406     \textcolor{comment}{//  Scheduling utilities}}
\DoxyCodeLine{407     \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{408 }
\DoxyCodeLine{418     [[nodiscard]] \textcolor{keywordtype}{bool} ShouldRecord(\textcolor{keywordtype}{double} t, std::uint64\_t sample\_index) \textcolor{keyword}{const};}
\DoxyCodeLine{419 }
\DoxyCodeLine{421     \textcolor{keywordtype}{void} AdvanceTimeTrigger(\textcolor{keywordtype}{double} t);}
\DoxyCodeLine{422 }
\DoxyCodeLine{423     \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{424     \textcolor{comment}{//  Output utilities}}
\DoxyCodeLine{425     \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{426 }
\DoxyCodeLine{428     \textcolor{keywordtype}{void} OpenOutput();}
\DoxyCodeLine{429 }
\DoxyCodeLine{431     \textcolor{keywordtype}{void} WriteHeader();}
\DoxyCodeLine{432 }
\DoxyCodeLine{434     \textcolor{keywordtype}{void} WriteSidecarMetadata(\textcolor{keyword}{const} \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_run_info}{RunInfo}} \&run) \textcolor{keyword}{const};}
\DoxyCodeLine{435 }
\DoxyCodeLine{437     \textcolor{keywordtype}{void} WriteRow(\textcolor{keyword}{const} \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_sample_info}{SampleInfo}} \&s,}
\DoxyCodeLine{438                   \textcolor{keyword}{const} \mbox{\hyperlink{class_compact_star_1_1_physics_1_1_evolution_1_1_state_vector}{Evolution::StateVector}} \&Y,}
\DoxyCodeLine{439                   \textcolor{keyword}{const} \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_driver_context}{Evolution::DriverContext}} \&ctx);}
\DoxyCodeLine{440 }
\DoxyCodeLine{442     [[nodiscard]] \textcolor{keyword}{const} \textcolor{keywordtype}{char} *Delim() \textcolor{keyword}{const};}
\DoxyCodeLine{443 }
\DoxyCodeLine{444     \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{445     \textcolor{comment}{//  Value extraction}}
\DoxyCodeLine{446     \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{447 }
\DoxyCodeLine{449     \textcolor{keywordtype}{double} ExtractBuiltin(\textcolor{keyword}{const} Column \&col,}
\DoxyCodeLine{450                           \textcolor{keyword}{const} \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_sample_info}{SampleInfo}} \&s,}
\DoxyCodeLine{451                           \textcolor{keyword}{const} \mbox{\hyperlink{class_compact_star_1_1_physics_1_1_evolution_1_1_state_vector}{Evolution::StateVector}} \&Y,}
\DoxyCodeLine{452                           \textcolor{keyword}{const} \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_driver_context}{Evolution::DriverContext}} \&ctx) \textcolor{keyword}{const};}
\DoxyCodeLine{453 }
\DoxyCodeLine{455     \textcolor{keywordtype}{double} ExtractDriverScalar(\textcolor{keyword}{const} Column \&col,}
\DoxyCodeLine{456                                \textcolor{keyword}{const} \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_observers_1_1_sample_info}{SampleInfo}} \&s,}
\DoxyCodeLine{457                                \textcolor{keyword}{const} \mbox{\hyperlink{class_compact_star_1_1_physics_1_1_evolution_1_1_state_vector}{Evolution::StateVector}} \&Y,}
\DoxyCodeLine{458                                \textcolor{keyword}{const} \mbox{\hyperlink{struct_compact_star_1_1_physics_1_1_evolution_1_1_driver_context}{Evolution::DriverContext}} \&ctx) \textcolor{keyword}{const};}
\DoxyCodeLine{459 }
\DoxyCodeLine{461     \textcolor{keyword}{const} \mbox{\hyperlink{class_compact_star_1_1_physics_1_1_driver_1_1_diagnostics_1_1_i_driver_diagnostics}{Driver::Diagnostics::IDriverDiagnostics}} *FindDriverByProducer(\textcolor{keyword}{const} std::string \&name) \textcolor{keyword}{const};}
\DoxyCodeLine{462 }
\DoxyCodeLine{464     \textcolor{keywordtype}{void} BuildColumnsFromCatalog();}
\DoxyCodeLine{465 }
\DoxyCodeLine{467     \textcolor{keywordtype}{void} LoadCatalogIfNeeded();}
\DoxyCodeLine{468 }
\DoxyCodeLine{469   \textcolor{keyword}{private}:}
\DoxyCodeLine{470     Options opts\_;}
\DoxyCodeLine{471 }
\DoxyCodeLine{472     \textcolor{comment}{// Non-\/owning pointers to drivers that support diagnostics snapshots.}}
\DoxyCodeLine{473     std::vector<const Driver::Diagnostics::IDriverDiagnostics *> drivers\_;}
\DoxyCodeLine{474 }
\DoxyCodeLine{475     \textcolor{comment}{// Output stream for the table.}}
\DoxyCodeLine{476     std::ofstream out\_;}
\DoxyCodeLine{477 }
\DoxyCodeLine{478     \textcolor{comment}{// Run state}}
\DoxyCodeLine{479     \textcolor{keywordtype}{bool} started\_ = \textcolor{keyword}{false};}
\DoxyCodeLine{480     \textcolor{keywordtype}{bool} header\_written\_ = \textcolor{keyword}{false};}
\DoxyCodeLine{481 }
\DoxyCodeLine{482     \textcolor{comment}{// Scheduling state}}
\DoxyCodeLine{483     \textcolor{keywordtype}{double} next\_time\_trigger\_ = 0.0;}
\DoxyCodeLine{484 }
\DoxyCodeLine{485     \textcolor{comment}{// Optional: cache driver-\/name lookup to avoid linear search each row.}}
\DoxyCodeLine{486     \textcolor{keyword}{mutable} std::unordered\_map<std::string, const Driver::Diagnostics::IDriverDiagnostics *> driver\_cache\_;}
\DoxyCodeLine{487 }
\DoxyCodeLine{488     \textcolor{comment}{// Cached schema info for quick validation/lookups:}}
\DoxyCodeLine{489     \textcolor{keyword}{mutable} std::unordered\_map<std::string, const Diagnostics::ProducerCatalog *> producer\_catalog\_cache\_;}
\DoxyCodeLine{490 }
\DoxyCodeLine{491     \textcolor{comment}{// Diagnostics catalog for schema-\/driven columns.}}
\DoxyCodeLine{492     std::shared\_ptr<const Diagnostics::DiagnosticCatalog> catalog\_;}
\DoxyCodeLine{493 \};}
\DoxyCodeLine{494 }
\DoxyCodeLine{495 \} \textcolor{comment}{// namespace CompactStar::Physics::Evolution::Observers}}

\end{DoxyCode}
